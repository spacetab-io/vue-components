<div class="b-table">
  <div class="table-wrapper">
      <table
          class="table"
          :class="tableClasses">
          <thead v-if="newColumns.length">
              <tr>
                  <th
                      v-for="(column, index) in visibleColumns"
                      :key="index"
                      :class="{
                          'is-current-sort': currentSortColumn === column,
                          'is-sortable': column.sortable
                      }"
                      :style="{
                          width: column.width === void 0 ? null : column.width + 'px'
                      }"
                      @click.stop="sort(column)">
                      <div
                          class="th-wrap"
                          :class="{
                              'is-numeric': column.numeric,
                              'is-centered': column.centered
                      }">
                          <template v-if="column.$scopedSlots && column.$scopedSlots.header">
                              <b-slot-component
                                  :component="column"
                                  :scoped="true"
                                  name="header"
                                  tag="span"
                                  :props="{ column, index }"
                              />
                          </template>
                          <template v-else-if="$scopedSlots.header">
                              <slot
                                  name="header"
                                  :column="column"
                                  :index="index"
                              />
                          </template>
                          <template v-else>{{ column.label }}</template>

                          <b-icon
                              v-show="currentSortColumn === column"
                              :icon="sortIcon"
                              :pack="iconPack"
                              both
                              :size="sortIconSize"
                              :class="{ 'is-desc': !isAsc }"/>
                      </div>
                  </th>
              </tr>
          </thead>

          <tbody v-if="newData.length">
            <template v-for="(row, index) in newData">
              <tr :key="customRowKey ? row[customRowKey] : index"
                  :class="rowClass(row, index)"
                  @click="selectRow(row)">
                  <slot v-if="$scopedSlots.default"
                        :row="row"
                        :index="index" />

                  <template v-else>
                    <st-table-column v-for="column in newColumns"
                                     v-bind="column"
                                     :key="column.field"
                                     internal>
                        <slot :name="column.field"
                              :index="index"
                              :row="row"
                              :column="column"
                              :value="value = getRowValue(row, column, index)">
                          <span v-if="column.renderHtml"
                                v-html="value" />
                          <template v-else>
                              {{ value }}
                          </template>
                        </slot>
                    </st-table-column>
                  </template>
              </tr>
            </template>
          </tbody>

          <tbody v-else>
            <tr>
              <td :colspan="columnCount">
                <slot name="empty" />
              </td>
            </tr>
          </tbody>

          <tfoot v-if="$slots.footer !== void 0">
            <tr>
              <slot v-if="hasCustomFooterSlot()"
                    name="footer" />
              <th v-else
                  :colspan="columnCount">
                  <slot name="footer" />
              </th>
            </tr>
          </tfoot>
      </table>
  </div>
</div>
